#!/bin/sh -e
# Fetches any updates from repositories and builds/installs updates
# Takes no arguments

pkgmanager fetch
# shellcheck disable=2046
set -- $(pkgmanager outdated)

[ $# -eq 0 ] && exit 0

echo "Updating $*... continue Y/n"
read -r response
if [ "$response" != y ] && [ "$response" != Y ]; then
    exit 1
fi

for pkg do
    pkgmanager build "$pkg"
    pkgmanager install "$pkg"
done
